import{r as a,j as e,c as g}from"./client-D_PkVYew.js";function b(){const[r,j]=a.useState(null),[x,o]=a.useState(!0),[d,m]=a.useState(null);a.useEffect(()=>{p()},[]);const p=async()=>{try{const t=new URLSearchParams(window.location.search).get("orderCode");if(!t)throw new Error("ì£¼ë¬¸ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤.");o(!0);const n=await fetch(`/order/complete/data?orderCode=${t}`);if(!n.ok){const h=await n.json().catch(()=>({})),f=h.header?.rtmsg||h.message||"ì£¼ë¬¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";throw new Error(f)}const c=await n.json();if(c.header&&c.header.rtcd!=="S00")throw new Error(c.header.rtmsg||"ì£¼ë¬¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");const l=c.body||c;console.log("ğŸ“‹ ì£¼ë¬¸ì™„ë£Œ ë°ì´í„°:",l),console.log("ğŸ“ ìš”ì²­ì‚¬í•­:",l.specialRequest),j(l)}catch(s){console.error("ì£¼ë¬¸ ì™„ë£Œ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨:",s),m(s.message)}finally{o(!1)}},i=s=>s?.toLocaleString()||"0",u=s=>{try{return new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\. /g,".").replace(".","")}catch{return s||""}};if(x)return e.jsx("div",{className:"complete-message",children:e.jsx("h2",{children:"ì£¼ë¬¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})});if(d)return e.jsxs("div",{className:"complete-message",children:[e.jsx("h2",{children:"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}),e.jsx("p",{children:d}),e.jsx("button",{onClick:()=>window.location.href="/",children:"í™ˆìœ¼ë¡œ ì´ë™"})]});if(!r)return e.jsxs("div",{className:"complete-message",children:[e.jsx("h2",{children:"ì£¼ë¬¸ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("button",{onClick:()=>window.location.href="/",children:"í™ˆìœ¼ë¡œ ì´ë™"})]});const N=r.orderItems?.reduce((s,t)=>s+t.cartPrice*t.quantity,0)||0;return e.jsxs("div",{className:"order-complete-container",children:[e.jsxs("div",{className:"complete-message",children:[e.jsxs("div",{className:"complete-icon",children:[e.jsx("i",{className:"fas fa-shopping-bag"}),e.jsx("div",{className:"success-badge",children:e.jsx("i",{className:"fas fa-check"})})]}),e.jsx("h2",{children:"ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤"}),e.jsxs("p",{className:"order-date",children:[u(r.orderDate)," ì£¼ë¬¸í•˜ì‹  ìƒí’ˆì˜",e.jsx("br",{}),"ì£¼ë¬¸ë²ˆí˜¸ëŠ” ",r.orderCode,"ì…ë‹ˆë‹¤."]})]}),e.jsxs("div",{className:"complete-section",children:[e.jsx("h3",{className:"section-title",children:"ì£¼ë¬¸ìƒí’ˆ"}),e.jsxs("table",{className:"order-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ìƒí’ˆëª…"}),e.jsx("th",{children:"ì˜µì…˜"}),e.jsx("th",{children:"íŒë§¤ì"}),e.jsx("th",{children:"ê¸ˆì•¡"})]})}),e.jsx("tbody",{children:r.orderItems?.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"product-info",children:[e.jsx("div",{className:"product-image",children:e.jsx("img",{src:s.productImage||"/img/placeholder.png",alt:s.productName})}),e.jsx("span",{children:s.productName})]})}),e.jsx("td",{children:s.optionType}),e.jsx("td",{children:s.sellerNickname||"íŒë§¤ì"}),e.jsxs("td",{children:[i(s.cartPrice*s.quantity),"ì›"]})]},t))})]})]}),e.jsxs("div",{className:"info-sections",children:[e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{className:"section-title",children:"ì£¼ë¬¸ì ì •ë³´"}),e.jsxs("table",{className:"info-table",children:[e.jsxs("tr",{children:[e.jsx("td",{children:"ì£¼ë¬¸ìëª…"}),e.jsx("td",{children:r.buyerName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"ì—°ë½ì²˜"}),e.jsx("td",{children:r.buyerPhone||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"ì´ë©”ì¼"}),e.jsx("td",{children:r.buyerEmail||"-"})]}),r.specialRequest&&e.jsxs("tr",{children:[e.jsx("td",{children:"ìš”ì²­ì‚¬í•­"}),e.jsx("td",{children:r.specialRequest})]})]})]}),e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{className:"section-title",children:"ê²°ì œì •ë³´"}),e.jsxs("table",{className:"info-table",children:[e.jsxs("tr",{children:[e.jsx("td",{children:"ê²°ì œìˆ˜ë‹¨"}),e.jsx("td",{children:"ê°„í¸ ê²°ì œ"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"total-label",children:"ì´ ê²°ì œ ê¸ˆì•¡"}),e.jsxs("td",{className:"total-amount",children:[i(N),"ì›"]})]})]})]})]}),e.jsxs("div",{className:"complete-actions",children:[e.jsx("a",{href:"/order/complete/history",className:"btn btn-primary",children:"ì£¼ë¬¸ë‚´ì—­ í™•ì¸"}),e.jsx("a",{href:"/order/complete/shopping",className:"btn btn-secondary",children:"ì‡¼í•‘ ê³„ì†í•˜ê¸°"})]})]})}const y=document.getElementById("order-complete-root"),w=g.createRoot(y);w.render(e.jsx(b,{}));
