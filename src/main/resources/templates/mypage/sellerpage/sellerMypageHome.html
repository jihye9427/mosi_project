<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MO:SI 판매자 마이페이지 홈</title>
  <link rel="stylesheet" th:href="@{/css/common.css}">
  <link rel="stylesheet" th:href="@{/css/layout.css}">
  <link rel="stylesheet" th:href="@{/css/sellerpage/sellerMypageHome.css}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.8/dist/web/static/pretendard.css">

</head>

<body>
  <div class="layout-wrapper">
    <header th:replace="~{fragments/sellerHeader :: sellerHeader}"></header>

    <div class="page-container">
      <main class="mypage-container">
        <!-- 사이드 바 분리 -->
        <aside th:replace="~{fragments/sellerSidebar :: sellerSidebar}"></aside>

        <section class="content">
          <h2>내 정보</h2>
          <div class="info-summary-card">
            <div class="info-grid">
              <div class="info-item info-main">
                <span class="title">누적 매출액</span>
                <span class="value" th:text="|${sellerPage.totalSales} 원|"> 980,000 원</span>
              </div>
              <div class="info-item info-main">
                <span class="title">팔로워</span>
                <span class="value" th:text="|${sellerPage.followerCount}명|"> 250명</span>
              </div>
            </div>
            <div class="info-grid-bottom">
              <div class="info-item"><span class="title">신규 주문</span><span class="value"
                  th:text="${#lists.size(orders)}"> 9</span></div>
              <div class="info-item"><span class="title">신규 문의글</span><span class="value"
                  th:text="${sellerPage.recentQnaCnt}"> 2</span></div>
              <div class="info-item"><span class="title">상품 리뷰</span><span class="value"
                  th:text="${sellerPage.reviewCount}"> 25</span></div>
            </div>
          </div>

          <div class="section-card recent-orders">
            <div class="section-header">
              <h3>판매 내역<span class="sub-text">(최근 1주일 이내)</span></h3>
              <a th:href="@{/order/seller/history}" class="view-all">전체보기 ></a>
            </div>
            <table>
              <thead>
                <tr>
                  <th>주문일</th>
                  <th>주문내역</th>
                  <th>주문번호</th>
                  <th>결제금액</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="order : ${orders}">
                  <td th:text="${order.date}">2025.06.18</td>
                  <td class="order-item">
                    <div class="order-item-image"></div><span th:text="${order.title}">[MO:SI Pick] 황령산 투어 (1박
                      2일)</span>
                  </td>
                  <td th:text="${order.orderNo}">ORD20250525-9018706</td>
                  <td class="price" th:text="|${order.amount}원|">5,000원</td>
                </tr>
                <tr th:each="order : ${orders}">
                  <td th:text="${order.date}">2025.06.18</td>
                  <td class="order-item">
                    <div class="order-item-image"></div><span th:text="${order.title}">[MO:SI Pick] 황령산 투어 (1박
                      2일)</span>
                  </td>
                  <td th:text="${order.orderNo}">ORD20250525-9018706</td>
                  <td class="price" th:text="|${order.amount}원|">5,000원</td>
                </tr>
                <tr th:each="order : ${orders}">
                  <td th:text="${order.date}">2025.06.18</td>
                  <td class="order-item">
                    <div class="order-item-image"></div><span th:text="${order.title}">[MO:SI Pick] 황령산 투어 (1박
                      2일)</span>
                  </td>
                  <td th:text="${order.orderNo}">ORD20250525-9018706</td>
                  <td class="price" th:text="|${order.amount}원|">5,000원</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="ad-banner">
            <button class="ad-arrow prev">&lt;</button>
            <span>광고 슬라이드</span>
            <button class="ad-arrow next">&gt;</button>
          </div>

          <div class="section-card">
            <div class="section-header">
              <h3>내 상품 목록</h3>
              <a th:href="@{/product/manage}" class="view-all">전체보기 ></a>
            </div>
            <div class="home-product-list">
              <th:block th:if="${totalCount > 0}">
                <div class="home-product-item" th:each="form : ${productList}">
                  <a class="home-product-item-container" th:href="@{/product/view/{id}(id=${form.productId})}">
                    <div class="home-thumbnail">
                      <img th:if="${form.images != null and #lists.size(form.images) > 0}"
                           th:src="|data:${form.images[0].mimeType};base64,${form.images[0].encodedImageData}|"
                           th:alt="${form.images[0].fileName}" />
                      <img th:if="${form.images == null or #lists.isEmpty(form.images)}"
                           th:src="@{/img/default-product.png}" alt="기본 상품 이미지" />
                    </div>
                    <div class="home-product-info">
                      <h3 th:text="${form.title}">상품명</h3>
                      <p class="s-price"
                         th:text="|${#numbers.formatDecimal(form.salesPrice, 0, 'COMMA', 0, 'POINT')} 원|"></p>
                      <p class="n-price"
                         th:text="|${#numbers.formatDecimal(form.normalPrice, 0, 'COMMA', 0, 'POINT')} 원|"></p>
                    </div>
                  </a>
                </div>
              </th:block>
              <th:block th:if="${totalCount == 0}">
                <p class="no-products">등록된 상품이 없습니다.</p>
              </th:block>
            </div>
          </div>
        </section>
      </main>
    </div>
    <!-- 공지 -->
    <div class="notice-bar">
      <div class="notice-label">공지</div>
      <div class="notice-text">&lt;MO:SI&gt; 신규 코스 등록 이벤트 당첨자 안내</div>
      <a href="#" class="more-link">+ 더보기</a>
    </div>

    <footer th:replace="~{fragments/footer :: footer}"></footer>
  </div>

  <script th:src="@{/js/sellerpage/sellerMypageHome.js}"></script>
  <script th:src="@{/js/layout.js}"></script>
</body>

</html>